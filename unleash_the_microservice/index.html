<!DOCTYPE html>
<html>
  <head>
    <title>Unleash the microservice</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="../styles/styles.css">
  </head>
  <body>
    <textarea id="source">

class: center, middle inverse

.large.left[
# Unleash 
_open source feature toggle framework_
]

???
Unleash - en open-source løsning for feature toggling

---
class: background-img
# Feature Toggles
<img src="../images/Merrydown_Cider Factory.jpg">

.img-src[https://www.flickr.com/photos/howzey/3805038515]

???
Feature Toggles er en enkel teknikk
- Skille mellom **release** og **deploy** av funksjonalitet
- Lar oss integrere uferdig kode på master
 - Slipper langlevde brancher som blir dyre å integrere
- Teste nye funksjoner i produksjon 
- **Økt kontroll:**
 - for hvem og når funksjon blir aktiv
- Gradvis utrulling av ny funksjonalitet

---
# Feature toggles: oppsummert
.large[
- Skille **release** og **deploy** av funksjonalitet¹
- Teste ny funksjonalitet tidlig i produksjon
- Gradvis utrulling av ny funksjonalitet
- Lynrask tilbakerulling
]

---
# Aktiveringsstrategier
.large[
- ** Regler som bestemmer om en _feature toggle_ er aktiv**
 - bruker
 - rolle
 - dato
 - servernode
- ** Gradivs utrulling av funksjonalitet**
]

???
- det morsomme med feature toggling
- enkle regler som bestemmer om en funksjon regnes som aktiv
- gir oss kontroll 
 - for hvem og når en funksjon blir aktiv
- gradivis utrulling av funksjoner

---
# Økt kontroll
.large[
- Hvem får tilgang til en ny funksjon (og når)
- Gradvis utrulling til alle brukere
- Lynrask _tilbakerulling_ ved behov
]

???
- feature toggles => økt kontroll på tilgang
- kan gradvis innføre den nye funksjonen
- enkelt å rulle tilbake
 - feil eller negativ KPI

---
# Minimal impact!

.large[
- Bruk så få ```if statements``` som mulig
- Beskytt inngangen (lenke) til nye UI-komponenter
- _Nye APIer trenger ikke beskyttelse_
 - eksisterende klienter kjenner ikke til muligheten
]

???
- Bruk så få ```if statements``` som mulig
- Beskytt inngangen (lenke) til nye UI-komponenter
- _Nye APIer trenger ikke beskyttelse_
 - eksisterende klienter kjenner ikke til muligheten



---
# Unleash
.large[
- Feature toggles i FINN
 - _feature toggles_ i ett verktøy
 - en felles robust og stabil klient
- Unleash _eies_ av UP i FINN
- Open source
]


<br /><br />

.right[
### https://github.com/finn-no/unleash
]


???
- Endte opp med å lage Unleash
  - Løser _feature toggles_ for FINN
- UP eier Unleash i FINN
- Open source
 - andre selskaper kan dra nytte av det vi gjør
 - andre selskaper kan bidra til en felles løsning


---
# Unleash

<img src="images/unleash_system.png" style="width: 100%;">


---
# Unleash is open source

_**unleash-java-finn** wraps the open-source client with finn specific details:_
- greenpages
- finn specific strategies
- etc..


---
# How to get started



```java
//create a new client
Unleash unleash = new FinnUnleash();
```

```java
//check whether a toggle is enabled
unleash.isEnabled("talent.newAwesomeFeature");
```

```java
//check toggle with trueish-fallback
unleash.isEnabled("talent.unknwon", true);
```


.bottom.small[Stash: https://git.finn.no/projects/MODS/repos/unleash-java-finn/browse]

---
# Unleash Admin:

- Define new feature toggles
- Enable / disable feature toggles
- Define new strategies

.right[
<img src="images/unleash_admin.png" style="width: 500px;border: 1px solid gray;">
http://rest.finn.no/unleash/
]

.bottom.small[]


---
# Custom strategies

Step 1: You have to implement your own strategy.

```java
public interface Strategy {
    String getName();

    boolean isEnabled(Map<String, String> parameters);
}
```

Step 2: You have to register the strategy definition in Unleash Admin:
- (screenshot)
- which parameters does your stratgy require?

PS! Remember to register your custom strategies when you create the unleash instance:

```java
Unleash unleash = new FinnUnleash(customStrategy1, customStrategy2);
```

---
# FINN-internal strategies:

Implemented shared strategies in FINN
- Default
- ActiveForUserWithId
- GradualRolloutRandom

Possible strategies:
- GradualRollout
- ByDate
- ByServerNode
- ..

We must develop the necessary stratgies together!

???
Strategier bør oppstå i konkrete prosjekter etter konkrete behov og testet lokalt. 
Når/hvis vi ser at flere i FINN kunne ha glede av en strategi bør disse commites 
tilbake til den delete finn-klienten.


---
class: background-img
# Rydd etter deg!
<img src="../images/pollution.jpg">

.img-src[https://www.flickr.com/photos/epsos/5444678656/]

???
- Slett feature toggles når du er ferdig med den.
- Kostbart å vedlikeholde over tid
- Hver toggle gir en ny "vei" i applikasjonen din.

- Så få permanente 'feature toggles' som mulig


---
class: inverse 

# Hva løser IKKE Unleash?
.large[.large[
- AB-testing
- Canary release
- Business toggles
]]

???
- AB testing 
 - er mer enn bare å skru funksjoner av og på. 
 - kan være en komponent i din AB-test implementasjon
- Canary release
 - rulle ut til noen få noder først
- Businiess toggles
 - F.eks: gravide mødre i Oslo skal få denne versjonen.

---
# Fremtidig funksjonalitet

- Authentication
- Metrics 
 - clientside
 - serverside
- Traceability
- More FINN-internal strategies
- Server setup
 - One stable test
 - One stable prod
- Clients for other languages 
 - (e.g.: node)

---
class: middle inverse

# Mer info?
### HIPCHAT: .silver[unleash]
### EPOST:   .silver[unleash@finn.no]
### Stash:   .silver[https://git.finn.no/mods/..]
### GITHUB:  .silver[https://github.com/finn-no/unleash]

    </textarea>
    <script src="../scripts/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
